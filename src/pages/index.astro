---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Hero from '../components/Hero.astro';
import Section from '../components/Section.astro';
import IndustryToggle from '../components/IndustryToggle.astro';
import ResultsSection from '../components/ResultsSection.astro';
import CTASection from '../components/CTASection.astro';
import { getPageTitle, headerDefaults, footerDefaults } from '../data/pageDefaults';
import {
  hero,
  ambitionCards,
  featuresSection,
  serviceCards,
  defaultIndustry,
  cta,
} from '../data/pages/home';
import { intakeFormConfig } from '../data/intakeForm';
import {
  buildWebSiteSchema,
  buildProfessionalServiceSchema,
  buildWebPageSchema,
  buildOfferCatalogSchema,
} from '../data/schema';
import { siteConfig } from '../data/site';

const homeWebPage = buildWebPageSchema({
  name: 'Home',
  description: siteConfig.defaultDescription,
  url: `${siteConfig.siteUrl}/`,
});
---

<BaseLayout
  title={getPageTitle('Operational Improvement & Constraint Analysis')}
  description="Theory of Constraints consulting that breaks organizational bottlenecks. We find the constraint, design the fix, and scale the flow. Kirkland, WA."
  jsonLd={[
    buildWebSiteSchema(),
    homeWebPage,
    buildProfessionalServiceSchema(),
    buildOfferCatalogSchema(),
  ]}
>
  <Header slot="header" {...headerDefaults} currentPath={Astro.url.pathname} />

  <Hero
    headline={hero.headline}
    subheadline={hero.subheadline}
    bullets={hero.bullets}
    primaryCta={hero.primaryCta}
    secondaryCta={hero.secondaryCta}
    intakeForm={intakeFormConfig}
    ambitionCards={ambitionCards}
  />

  <ResultsSection />

  <Section
    background="muted"
    label={featuresSection.label}
    heading={featuresSection.heading}
    subheading={featuresSection.subheading}
  >
    <IndustryToggle cards={serviceCards} defaultIndustry={defaultIndustry} />
  </Section>

  <CTASection
    headline={cta.headline}
    description={cta.description}
    primaryCta={cta.primaryCta}
    secondaryCta={cta.secondaryCta}
    footnote={cta.footnote}
  />

  <Footer slot="footer" {...footerDefaults} />
</BaseLayout>
