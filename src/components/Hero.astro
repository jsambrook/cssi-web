---
/*
 * Hero.astro
 *
 * Full-width hero section with headline, subheadline, bullet points, and CTAs.
 * Includes gradient background and decorative blur elements.
 * When intakeForm is provided, switches to a 2-column layout with the form on the right.
 *
 * Props:
 *   headline: Main headline text
 *   subheadline: Supporting text
 *   bullets: Array of {bold, text} for key points
 *   primaryCta: {text, href}
 *   secondaryCta: {text, href, icon?}
 *   intakeForm: IntakeFormConfig (optional â€” enables 2-column layout)
 */

import type { IntakeFormConfig } from "../data/types";
import IntakeForm from "./IntakeForm.astro";

interface Bullet {
  bold: string;
  text: string;
}

interface CTA {
  text: string;
  href: string;
  icon?: string;
}

interface Props {
  headline: string;
  subheadline: string;
  bullets?: Bullet[];
  primaryCta?: CTA;
  secondaryCta?: CTA;
  intakeForm?: IntakeFormConfig;
}

const { headline, subheadline, bullets = [], primaryCta, secondaryCta, intakeForm } = Astro.props;
const hasTwoColumns = !!intakeForm;
---

<section class="relative py-10 sm:py-12 lg:py-16 overflow-hidden">
  <!-- Background -->
  <div class="absolute inset-0 bg-gradient-to-br from-accent/10 via-background to-primary/5 -z-10"></div>
  <div class="absolute top-20 right-0 w-64 sm:w-80 lg:w-96 h-64 sm:h-80 bg-accent/5 rounded-full blur-3xl -z-10"></div>
  <div class="absolute bottom-0 left-0 w-64 sm:w-80 lg:w-96 h-64 sm:h-80 bg-primary/5 rounded-full blur-3xl -z-10"></div>

  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class:list={[
      hasTwoColumns
        ? "lg:grid lg:grid-cols-2 gap-8 lg:gap-12 items-start"
        : "max-w-4xl mx-auto lg:mx-0",
    ]}>
      <!-- Hero content (left column when 2-col) -->
      <div class="space-y-5 lg:pt-4">
        <!-- Headline -->
        <h1 class="text-4xl sm:text-5xl lg:text-6xl leading-tight">
          {headline}
        </h1>

        <!-- Subheadline -->
        <p class="text-base sm:text-lg text-muted-foreground leading-relaxed max-w-2xl">
          {subheadline}
        </p>

        <!-- Bullet Points -->
        {bullets.length > 0 && (
          <div class="space-y-3 pt-2">
            {bullets.map((bullet) => (
              <div class="flex items-start gap-3">
                <svg class="h-5 w-5 text-accent flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true">
                  <circle cx="12" cy="12" r="10"></circle>
                  <path d="m9 12 2 2 4-4"></path>
                </svg>
                <p class="text-muted-foreground text-sm sm:text-base">
                  <strong class="text-foreground">{bullet.bold}</strong> {bullet.text}
                </p>
              </div>
            ))}
          </div>
        )}

        <!-- CTAs -->
        {(primaryCta || secondaryCta) && (
          <div class="flex flex-col sm:flex-row gap-3 pt-4">
            {primaryCta && (
              <a
                href={primaryCta.href}
                class="inline-flex items-center justify-center gap-2 whitespace-nowrap
                       rounded-button transition-all bg-primary text-primary-foreground
                       hover:bg-primary/90 shadow-sm h-[54px] px-10 py-5 text-sm"
                {...(primaryCta.href.startsWith('http') ? { target: '_blank', rel: 'noopener noreferrer' } : {})}
              >
                {primaryCta.text}
                <svg class="ml-1.5 h-4 w-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M5 12h14"></path>
                  <path d="m12 5 7 7-7 7"></path>
                </svg>
              </a>
            )}
            {secondaryCta && (
              <a
                href={secondaryCta.href}
                class="inline-flex items-center justify-center gap-2 whitespace-nowrap
                       rounded-button transition-all border border-border bg-background
                       text-foreground hover:bg-accent/10 h-[54px] px-10 py-5 text-sm"
              >
                {secondaryCta.text}
              </a>
            )}
          </div>
        )}
      </div>

      <!-- Intake form (right column) -->
      {intakeForm && (
        <div class="mt-8 lg:mt-0">
          <IntakeForm config={intakeForm} />
        </div>
      )}
    </div>
  </div>
</section>
